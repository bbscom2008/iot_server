### 修改密码功能测试

### 1. 登录获取Token（用于测试"通过原密码修改"）
POST http://127.0.0.1:8080/user/login
Content-Type: application/json

{
  "phone": "13800138000",
  "password": "123456"
}

### 响应示例：
# {
#   "code": 200,
#   "msg": "success",
#   "data": {
#     "token": "eyJhbGciOiJIUzI1NiJ9...",
#     "user": { ... }
#   }
# }
### 复制token用于后续请求

###

### 2. 发送重置密码验证码
POST http://127.0.0.1:8080/user/sendResetPasswordCode
Content-Type: application/json

{
  "phone": "13800138000"
}

### 响应：
# {
#   "code": 200,
#   "msg": "success",
#   "data": "验证码已发送"
# }
### 验证码会在后端控制台输出

###

### 3. 通过原密码修改密码
POST http://127.0.0.1:8080/user/changePasswordByOld
Authorization: eyJhbGciOiJIUzI1NiJ9.eyJ1c2VySWQiOjEsInBob25lIjoiMTM4MDAxMzgwMDAiLCJpYXQiOjE3Mjk1MDAwMDAsImV4cCI6MTczMDEwNDgwMH0.xxx
Content-Type: application/json

{
  "oldPassword": "123456",
  "newPassword": "654321"
}

### 响应：
# {
#   "code": 200,
#   "msg": "success",
#   "data": "密码修改成功"
# }

###

### 4. 用新密码登录验证
POST http://127.0.0.1:8080/user/login
Content-Type: application/json

{
  "phone": "13800138000",
  "password": "654321"
}

### 应该登录成功

###

### 5. 通过手机号修改密码
POST http://127.0.0.1:8080/user/changePasswordByPhone
Content-Type: application/json

{
  "phone": "13800138000",
  "verifyCode": "123456",
  "newPassword": "888888"
}

### 响应：
# {
#   "code": 200,
#   "msg": "success",
#   "data": "密码修改成功"
# }

###

### 6. 用新密码登录验证
POST http://127.0.0.1:8080/user/login
Content-Type: application/json

{
  "phone": "13800138000",
  "password": "888888"
}

### 应该登录成功

###

### 测试错误情况

### 7. 测试：原密码错误
POST http://127.0.0.1:8080/user/changePasswordByOld
Authorization: eyJhbGciOiJIUzI1NiJ9.eyJ1c2VySWQiOjEsInBob25lIjoiMTM4MDAxMzgwMDAiLCJpYXQiOjE3Mjk1MDAwMDAsImV4cCI6MTczMDEwNDgwMH0.xxx
Content-Type: application/json

{
  "oldPassword": "wrong_password",
  "newPassword": "654321"
}

### 应该返回错误：原密码错误

###

### 8. 测试：新密码太短
POST http://127.0.0.1:8080/user/changePasswordByOld
Authorization: eyJhbGciOiJIUzI1NiJ9.eyJ1c2VySWQiOjEsInBob25lIjoiMTM4MDAxMzgwMDAiLCJpYXQiOjE3Mjk1MDAwMDAsImV4cCI6MTczMDEwNDgwMH0.xxx
Content-Type: application/json

{
  "oldPassword": "123456",
  "newPassword": "123"
}

### 应该返回错误：密码长度不能少于6位

###

### 9. 测试：新旧密码相同
POST http://127.0.0.1:8080/user/changePasswordByOld
Authorization: eyJhbGciOiJIUzI1NiJ9.eyJ1c2VySWQiOjEsInBob25lIjoiMTM4MDAxMzgwMDAiLCJpYXQiOjE3Mjk1MDAwMDAsImV4cCI6MTczMDEwNDgwMH0.xxx
Content-Type: application/json

{
  "oldPassword": "123456",
  "newPassword": "123456"
}

### 应该返回错误：新密码不能与原密码相同

###

### 10. 测试：手机号未注册
POST http://127.0.0.1:8080/user/sendResetPasswordCode
Content-Type: application/json

{
  "phone": "19999999999"
}

### 应该返回错误：该手机号未注册

###

### 11. 测试：手机号格式错误
POST http://127.0.0.1:8080/user/sendResetPasswordCode
Content-Type: application/json

{
  "phone": "12345678901"
}

### 应该返回错误：手机号格式不正确

###

### 12. 恢复原始密码（测试完后）
POST http://127.0.0.1:8080/user/changePasswordByPhone
Content-Type: application/json

{
  "phone": "13800138000",
  "verifyCode": "123456",
  "newPassword": "123456"
}

### 恢复为原始密码

